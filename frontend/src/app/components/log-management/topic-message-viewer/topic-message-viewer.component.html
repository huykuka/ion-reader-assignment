<!-- Message Display Panel -->
<div
  class="mb-4 p-4 border rounded-md bg-white shadow-sm min-h-[200px] transition-all duration-300"
>
  <div *ngIf="selectedTopic()">
    <div class="mb-2 text-sm text-gray-500">
      <span class="font-medium">Topic:</span>
      {{ selectedTopic()!.topicName }}
      <span class="ml-2 font-medium">Type:</span>
      {{ selectedTopic()!.topicType }}
      <span class="ml-2 font-medium">Frequency:</span>
      {{ selectedTopic()!.frequency }} Hz
    </div>

    <div class="mb-2 text-sm text-gray-500">
      <span class="font-medium">Playback:</span>
      {{ currentPlaybackPosition.toFixed(2) }} seconds
      <span class="ml-2 font-medium" *ngIf="currentMessage">
        <span class="font-medium">Message Timestamp:</span>
        {{
          currentMessage.timestamp | date : "yyyy-MM-dd HH:mm:ss.SSS" : "UTC"
        }}
      </span>
    </div>

    <div class="message-content" *ngIf="currentMessage; else noCurrentMessage">
      <pre
        class="bg-gray-100 p-3 rounded overflow-auto max-h-[300px] text-sm whitespace-pre-wrap break-words"
        >{{ currentMessage.data | json }}</pre
      >
    </div>

    <ng-template #noCurrentMessage>
      <div class="flex items-center justify-center h-[150px] text-gray-500">
        <span>No message available at current playback position</span>
      </div>
    </ng-template>
  </div>

  <ng-template #noMessage>
    <div class="flex items-center justify-center h-[200px] text-gray-500">
      <span *ngIf="!selectedTopic()"
        >Please select a topic to view messages</span
      >
    </div>
  </ng-template>
</div>
