<!-- Message Display Panel -->
<div
  class="mb-4 p-4 border border-gray-400 rounded-md bg-white shadow-sm min-h-[200px] transition-all duration-300"
>
  <div *ngIf="selectedTopic()">
    <div class="mb-2 text-sm text-gray-500">
      <span class="font-medium">Topic:</span>
      {{ selectedTopic()!.topicName }}
      <span class="ml-2 font-medium">Type:</span>
      {{ selectedTopic()!.topicType }}
      <span class="ml-2 font-medium">Frequency:</span>
      {{ selectedTopic()!.frequency }} Hz
    </div>

    <div class="mb-2 text-sm text-gray-500">
      <span class="font-medium">Playback:</span>
      {{ currentPlaybackPosition.toFixed(2) }} seconds
      <span class="ml-2 font-medium" *ngIf="currentMessage">
        <span class="font-medium">Message Timestamp:</span>
        {{
          currentMessage.timestamp | date : "yyyy-MM-dd HH:mm:ss.SSS" : "UTC"
        }}
      </span>
    </div>

    <div class="message-content" *ngIf="currentMessage; else noCurrentMessage">
      <div class="flex justify-between items-center mb-2">
        <span class="text-sm font-medium text-gray-700">Message Content</span>
        <button
          pButton
          pRipple
          icon="pi pi-copy"
          class="p-button-sm p-button-text"
          (click)="copyMessageToClipboard()"
          pTooltip="Copy to clipboard"
          tooltipPosition="left"
        ></button>
      </div>
      <pre
        class="bg-gray-100 p-3 rounded overflow-auto max-h-[300px] text-sm whitespace-pre-wrap break-words"
        >{{ currentMessage.data | json }}</pre
      >
    </div>

    <ng-template #noCurrentMessage>
      <div class="flex flex-col items-center justify-center p-8 text-gray-500">
        <i class="pi pi-info-circle text-3xl mb-2"></i>
        <p class="text-base m-0">
          No message available at current playback position
        </p>
      </div>
    </ng-template>
  </div>

  <ng-template>
    <div class="flex items-center justify-center h-[200px] text-gray-500">
      <span *ngIf="!selectedTopic() && !currentMessage"
        >Please select a topic to view messages</span
      >
    </div>
  </ng-template>
</div>
